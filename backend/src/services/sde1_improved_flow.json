{
  "initial_node": "introduction",
  "nodes": {
    "introduction": {
      "task_messages": [
        {
          "role": "system",
          "content": "# Interview Introduction Phase\n\n1. Begin with a brief, professional introduction as the interviewer for an SDE1 position.\n2. Ask for the candidate's name and invite them to briefly introduce themselves.\n3. Keep your response concise (max 100 words).\n4. After the candidate responds with their introduction, state: \"Thank you for sharing that information. I'll make note of it as we proceed with the interview.\"\n5. CALL THE collect_candidate_info FUNCTION IMMEDIATELY AFTER THE CANDIDATE'S INTRODUCTION. DO NOT CONTINUE THE INTERVIEW WITHOUT CALLING THIS FUNCTION.\n\nIMPORTANT: YOU MUST CALL THE collect_candidate_info FUNCTION AFTER THE CANDIDATE INTRODUCES THEMSELVES. THIS IS REQUIRED TO PROCEED WITH THE INTERVIEW."
        }
      ],
      "functions": [
        {
          "type": "function",
          "function": {
            "name": "collect_candidate_info",
            "description": "Collect candidate's name and background information to begin the interview process",
            "parameters": {
              "type": "object",
              "properties": {
                "name": {
                  "type": "string",
                  "description": "The candidate's full name"
                },
                "background": {
                  "type": "string",
                  "description": "A brief summary of the candidate's background based on their introduction"
                },
                "initial_impression": {
                  "type": "string",
                  "description": "Your initial impression of the candidate's communication style and professionalism"
                }
              },
              "required": ["name", "background", "initial_impression"]
            },
            "handler": "__function__:collect_candidate_info",
            "transition_to": "background_discussion"
          }
        }
      ],
      "role_messages": [
        {
          "role": "system",
          "content": "# Interviewer Role\n\nYou are a professional technical interviewer conducting an SDE1 interview. Your goal is to assess the candidate's technical abilities, problem-solving skills, and cultural fit.\n\n## Key Behaviors\n- Be professional yet approachable\n- Ask probing questions rather than providing answers\n- Keep your responses concise (max 100 words)\n\n## Function Calling Requirements\n- You MUST call the designated function at the end of each phase\n- After the candidate responds to your introduction, immediately call the collect_candidate_info function\n- Do not proceed with additional interview questions until you've called the required function"
        }
      ]
    },
    "background_discussion": {
      "task_messages": [
        {
          "role": "system",
          "content": "# Technical Background Assessment Phase\n\n1. Begin by acknowledging something specific from their introduction.\n2. Ask about their technical background, focusing on programming languages and projects.\n3. Ask 1-2 follow-up questions about their strongest skills.\n4. After they've answered at least one follow-up question, state: \"Thank you for sharing your technical background. I'd like to move on to a coding exercise now.\"\n5. CALL THE process_background_info FUNCTION AFTER 2-3 EXCHANGES. DO NOT CONTINUE WITHOUT CALLING THIS FUNCTION.\n\nIMPORTANT: YOU MUST CALL THE process_background_info FUNCTION AFTER DISCUSSING THEIR TECHNICAL BACKGROUND. THIS IS REQUIRED TO PROCEED WITH THE INTERVIEW."
        }
      ],
      "functions": [
        {
          "type": "function",
          "function": {
            "name": "process_background_info",
            "description": "Process and record the candidate's technical background information",
            "parameters": {
              "type": "object",
              "properties": {
                "technical_background": {
                  "type": "string",
                  "description": "Summary of the candidate's technical experience and background"
                },
                "key_skills": {
                  "type": "string",
                  "description": "The primary technical skills the candidate has mentioned"
                },
                "communication_ability": {
                  "type": "string",
                  "description": "Assessment of how well the candidate communicates technical concepts"
                },
                "depth_of_knowledge": {
                  "type": "string",
                  "description": "Assessment of whether the candidate shows superficial or deep understanding of their claimed skills"
                }
              },
              "required": [
                "technical_background",
                "key_skills",
                "communication_ability",
                "depth_of_knowledge"
              ]
            },
            "handler": "__function__:process_background_info",
            "transition_to": "coding_problem_introduction"
          }
        }
      ]
    },
    "coding_problem_introduction": {
      "task_messages": [
        {
          "role": "system",
          "content": "# Coding Problem Introduction Phase\n\n1. Present ONE moderate-difficulty coding problem appropriate for an SDE1 candidate.\n2. Choose from these problem types: array manipulation, string processing, or simple tree traversal.\n3. Clearly explain the problem with sample inputs/outputs and constraints.\n4. After presenting the problem, ask if they understand or have any clarifying questions.\n5. After they confirm understanding or you've answered their questions, state: \"Now that you understand the problem, let's work on solving it.\"\n6. CALL THE present_coding_problem FUNCTION IMMEDIATELY AFTER CONFIRMING UNDERSTANDING. DO NOT DISCUSS SOLUTIONS YET.\n\nIMPORTANT: YOU MUST CALL THE present_coding_problem FUNCTION AFTER THE CANDIDATE UNDERSTANDS THE PROBLEM. THIS IS REQUIRED TO PROCEED WITH THE INTERVIEW."
        }
      ],
      "functions": [
        {
          "type": "function",
          "function": {
            "name": "present_coding_problem",
            "description": "Record the coding problem presented to the candidate",
            "parameters": {
              "type": "object",
              "properties": {
                "problem_description": {
                  "type": "string",
                  "description": "The full description of the coding problem presented"
                },
                "problem_constraints": {
                  "type": "string",
                  "description": "The constraints and requirements for the problem"
                },
                "problem_difficulty": {
                  "type": "string",
                  "enum": ["easy", "moderate", "challenging"],
                  "description": "The difficulty level of the presented problem"
                },
                "skills_tested": {
                  "type": "string",
                  "description": "The key programming skills this problem is designed to test"
                }
              },
              "required": [
                "problem_description",
                "problem_constraints",
                "problem_difficulty",
                "skills_tested"
              ]
            },
            "handler": "__function__:present_coding_problem",
            "transition_to": "coding_problem_discussion"
          }
        }
      ]
    },
    "coding_problem_discussion": {
      "task_messages": [
        {
          "role": "system",
          "content": "# Coding Problem Discussion Phase\n\n1. First, ask the candidate to explain their approach before writing code.\n2. Ask follow-up questions about their solution approach.\n3. Have them implement their solution (pseudocode or actual code).\n4. Ask about time/space complexity and possible optimizations.\n5. After they've explained their approach AND provided their implementation, state: \"Thank you for walking through your solution. Let's move on to a system design question.\"\n6. CALL THE evaluate_problem_solving FUNCTION AFTER THEY'VE COMPLETED THEIR SOLUTION. DO NOT CONTINUE WITHOUT CALLING THIS FUNCTION.\n\nIMPORTANT: YOU MUST CALL THE evaluate_problem_solving FUNCTION AFTER DISCUSSING THEIR CODING SOLUTION. THIS IS REQUIRED TO PROCEED WITH THE INTERVIEW."
        }
      ],
      "functions": [
        {
          "type": "function",
          "function": {
            "name": "evaluate_problem_solving",
            "description": "Evaluate the candidate's problem-solving approach and implementation",
            "parameters": {
              "type": "object",
              "properties": {
                "approach": {
                  "type": "string",
                  "description": "The candidate's overall approach to solving the problem"
                },
                "solution_quality": {
                  "type": "string",
                  "description": "Assessment of how effective their solution is"
                },
                "problem_understanding": {
                  "type": "string",
                  "description": "How well the candidate understood the problem requirements"
                },
                "code_implementation": {
                  "type": "string",
                  "description": "Quality of the actual code implementation"
                },
                "optimization_thinking": {
                  "type": "string",
                  "description": "Candidate's ability to analyze and improve solution efficiency"
                },
                "communication_during_coding": {
                  "type": "string",
                  "description": "How well the candidate explained their thinking while solving the problem"
                }
              },
              "required": [
                "approach",
                "solution_quality",
                "problem_understanding",
                "code_implementation",
                "optimization_thinking",
                "communication_during_coding"
              ]
            },
            "handler": "__function__:evaluate_problem_solving",
            "transition_to": "system_design_question"
          }
        }
      ]
    },
    "system_design_question": {
      "task_messages": [
        {
          "role": "system",
          "content": "# System Design Question Phase\n\n1. Present ONE simple system design question (URL shortener, simple file storage service, etc.).\n2. Explicitly state you're looking for a high-level approach, not deep architectural details.\n3. Ask the candidate to explain their design approach.\n4. Ask 1-2 follow-up questions about specific aspects (data storage, API design, etc.).\n5. After they've explained their design AND answered follow-up questions, state: \"Thank you for explaining your system design approach. Let's move on to some behavioral questions.\"\n6. CALL THE present_system_design FUNCTION AFTER DISCUSSING THEIR DESIGN. DO NOT CONTINUE WITHOUT CALLING THIS FUNCTION.\n\nIMPORTANT: YOU MUST CALL THE present_system_design FUNCTION AFTER THE SYSTEM DESIGN DISCUSSION. THIS IS REQUIRED TO PROCEED WITH THE INTERVIEW."
        }
      ],
      "functions": [
        {
          "type": "function",
          "function": {
            "name": "present_system_design",
            "description": "Record the system design question and evaluate the candidate's approach",
            "parameters": {
              "type": "object",
              "properties": {
                "design_question": {
                  "type": "string",
                  "description": "The system design question presented to the candidate"
                },
                "expected_components": {
                  "type": "string",
                  "description": "The key components expected in a good solution"
                },
                "candidate_approach": {
                  "type": "string",
                  "description": "Summary of the candidate's approach to the system design"
                },
                "system_design_strengths": {
                  "type": "string",
                  "description": "Areas where the candidate showed good system design understanding"
                },
                "system_design_weaknesses": {
                  "type": "string",
                  "description": "Areas where the candidate's system design knowledge was lacking"
                }
              },
              "required": [
                "design_question",
                "expected_components",
                "candidate_approach",
                "system_design_strengths",
                "system_design_weaknesses"
              ]
            },
            "handler": "__function__:present_system_design",
            "transition_to": "behavioral_questions"
          }
        }
      ]
    },
    "behavioral_questions": {
      "task_messages": [
        {
          "role": "system",
          "content": "# Behavioral Questions Phase\n\n1. Ask the candidate TWO behavioral questions from this list:\n   - \"Tell me about a challenging project you worked on and how you handled it.\"\n   - \"Describe a situation where you had to work with a difficult team member.\"\n   - \"Tell me about a time when you had to learn a new technology quickly.\"\n   - \"Give an example of a time you received critical feedback and how you responded.\"\n2. Ask follow-up questions for each response to get specific details.\n3. After they've answered BOTH questions AND your follow-ups, state: \"Thank you for sharing those experiences. Do you have any questions about the role or company?\"\n4. CALL THE evaluate_behavioral_response FUNCTION AFTER ASKING BOTH QUESTIONS. DO NOT CONTINUE WITHOUT CALLING THIS FUNCTION.\n\nIMPORTANT: YOU MUST CALL THE evaluate_behavioral_response FUNCTION AFTER DISCUSSING BEHAVIORAL QUESTIONS. THIS IS REQUIRED TO PROCEED WITH THE INTERVIEW."
        }
      ],
      "functions": [
        {
          "type": "function",
          "function": {
            "name": "evaluate_behavioral_response",
            "description": "Evaluate the candidate's responses to behavioral questions",
            "parameters": {
              "type": "object",
              "properties": {
                "response_quality": {
                  "type": "string",
                  "description": "Overall assessment of their behavioral responses"
                },
                "communication_skills": {
                  "type": "string",
                  "description": "Assessment of their communication abilities during this section"
                },
                "teamwork_indicators": {
                  "type": "string",
                  "description": "Assessment of the candidate's teamwork abilities based on their responses"
                },
                "problem_resolution_skills": {
                  "type": "string",
                  "description": "Assessment of how the candidate approaches and resolves challenges"
                },
                "specific_examples_provided": {
                  "type": "boolean",
                  "description": "Whether the candidate provided concrete examples or spoke in generalities"
                }
              },
              "required": [
                "response_quality",
                "communication_skills",
                "teamwork_indicators",
                "problem_resolution_skills",
                "specific_examples_provided"
              ]
            },
            "handler": "__function__:evaluate_behavioral_response",
            "transition_to": "candidate_questions"
          }
        }
      ]
    },
    "candidate_questions": {
      "task_messages": [
        {
          "role": "system",
          "content": "# Candidate Questions Phase\n\n1. Invite the candidate to ask any questions they have about the role, team, or company.\n2. Answer their questions thoughtfully and professionally.\n3. If they have no questions, suggest areas they might want to know about (team structure, tech stack, etc.).\n4. After you've answered their questions (or if they have none), state: \"Thank you for your questions. Let's wrap up this interview.\"\n5. CALL THE handle_candidate_questions FUNCTION AFTER ADDRESSING THEIR QUESTIONS. DO NOT CONTINUE WITHOUT CALLING THIS FUNCTION.\n\nIMPORTANT: YOU MUST CALL THE handle_candidate_questions FUNCTION AFTER DISCUSSING THEIR QUESTIONS. THIS IS REQUIRED TO PROCEED WITH THE INTERVIEW."
        }
      ],
      "functions": [
        {
          "type": "function",
          "function": {
            "name": "handle_candidate_questions",
            "description": "Record and respond to the candidate's questions about the role or company",
            "parameters": {
              "type": "object",
              "properties": {
                "questions": {
                  "type": "string",
                  "description": "Summary of the questions the candidate asked"
                },
                "response": {
                  "type": "string",
                  "description": "Summary of your responses to their questions"
                },
                "question_quality": {
                  "type": "string",
                  "description": "Assessment of the quality and thoughtfulness of the candidate's questions"
                },
                "engagement_level": {
                  "type": "string",
                  "description": "How engaged the candidate seemed during this final portion of the interview"
                }
              },
              "required": [
                "questions",
                "response",
                "question_quality",
                "engagement_level"
              ]
            },
            "handler": "__function__:handle_candidate_questions",
            "transition_to": "interview_conclusion"
          }
        }
      ]
    },
    "interview_conclusion": {
      "task_messages": [
        {
          "role": "system",
          "content": "# Interview Conclusion Phase\n\n1. Thank the candidate for their time and participation.\n2. Provide a brief, positive summary of the interview experience.\n3. Explain the next steps in the interview process (e.g., \"You'll hear back from our recruiting team within X days\").\n4. End on an encouraging note regardless of their performance.\n5. After delivering your conclusion, state: \"This concludes our formal interview. I've logged all the information we've discussed.\"\n6. CALL THE conclude_interview FUNCTION IMMEDIATELY AFTER YOUR CONCLUSION. DO NOT CONTINUE WITHOUT CALLING THIS FUNCTION.\n\nIMPORTANT: YOU MUST CALL THE conclude_interview FUNCTION AFTER DELIVERING YOUR CONCLUSION. THIS IS REQUIRED TO END THE INTERVIEW CORRECTLY."
        }
      ],
      "functions": [
        {
          "type": "function",
          "function": {
            "name": "conclude_interview",
            "description": "Conclude the interview and record final assessment information",
            "parameters": {
              "type": "object",
              "properties": {
                "final_remarks": {
                  "type": "string",
                  "description": "Your closing remarks to the candidate"
                },
                "next_steps": {
                  "type": "string",
                  "description": "Information provided about what happens next in the process"
                },
                "overall_interview_assessment": {
                  "type": "string",
                  "description": "Brief overall assessment of the interview flow and candidate engagement"
                }
              },
              "required": [
                "final_remarks",
                "next_steps",
                "overall_interview_assessment"
              ]
            },
            "handler": "__function__:conclude_interview",
            "transition_to": "end"
          }
        }
      ]
    },
    "end": {
      "task_messages": [
        {
          "role": "system",
          "content": "# Interview End Phase\n\n1. Deliver a final thank you message to the candidate.\n2. Wish them well in their job search.\n3. End the session cleanly without introducing new topics.\n4. CALL THE end_interview FUNCTION IMMEDIATELY AFTER YOUR FINAL MESSAGE.\n\nIMPORTANT: YOU MUST CALL THE end_interview FUNCTION TO PROPERLY END THE INTERVIEW SESSION. THIS IS THE FINAL REQUIRED STEP."
        }
      ],
      "functions": [
        {
          "type": "function",
          "function": {
            "name": "end_interview",
            "description": "Officially end the interview session and close the conversation",
            "parameters": {
              "type": "object",
              "properties": {
                "closing_message": {
                  "type": "string",
                  "description": "Final closing message delivered to the candidate"
                }
              },
              "required": ["closing_message"]
            },
            "handler": "__function__:end_interview",
            "transition_to": "end"
          }
        }
      ],
      "post_actions": [
        {
          "type": "end_conversation"
        }
      ]
    }
  }
}
